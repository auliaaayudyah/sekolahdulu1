"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[86790],{293659:(e,t,s)=>{s.d(t,{MiniChartPlotBase:()=>R,isTimePointIndex:()=>D});var i=s(951004),r=s(852290),o=s(827147),a=s(650151),n=s(724377),l=s(444372),h=s(623551),d=s(246733),_=s(66732),c=s(389137),u=s(401580),m=s(707957),p=s(732149),g=s(201089),y=s(919892),f=s(444331),C=s(938550);const b=(0,g.getLogger)("Chart.MiniChart");function S(e,t,s){return{time:e,color:s,value:t[4]}}function v(e,t){return{time:e,open:t[1],high:t[2],low:t[3],close:t[4]}}function I(e,t,s,i,r){return{time:e,topColor:i,bottomColor:r,lineColor:s,value:t[4]}}function w(e){const t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())/1e3}function D(e){return(0,c.isInteger)(e)}const P={leftLogical:.5,rightLogical:.5,leftPx:0,rightPx:4};class R{constructor(e,t,s){this._symbolChanged=new m.Delegate,this._seriesChanged=new m.Delegate,this._whitespaces=null,this._symbolResolved=new m.Delegate,this._originalScaleMode=null,this._customPriceFormatter=null,this._isDestroyed=new u.WatchedValue(!1),this._status=new u.WatchedValue(0),this._noData=new u.WatchedValue(null),this._directionBasedColor=new u.WatchedValue(null),this._dataLengthInfo=null,this._sessionId=new u.WatchedValue,this._barBuilderLoader=null,this._symbolInfo=null,this._symbol={symbol:""},this._timeFrameInvalidated=new m.Delegate,this._firstValueCache=null,this._historyUpdateReceived=!1,this._miniChart=e,this._originalSeriesOptions=t,this._currentSeriesOptions=(0,r.default)({},t),this._horzMargins=(0,r.default)({},P,t.horzMargins),this._series=this._createSeries(),this._originalVolumeOptions=s,this._volume=this._createVolume(),this._timeFrame=e.timeframe().spawn(),this._timeFrame.subscribe(this._updateSessionId.bind(this)),this._currentlyShownDataDescription=new C.WatchedObject({timeframe:this._timeFrame.value(),symbol:this.symbol()}),this._isLastSessionInterval=(0,_.combine)((e=>"LASTSESSION"===e.value),this._miniChart.timeframe().weakReference()),this._isLastSessionInterval.subscribe(this._updateSessionId.bind(this))}destroy(){var e;this._status.unsubscribe(),this._timeFrame.destroy(),this._isDestroyed.setValue(!0),this._isLastSessionInterval.destroy(),null===(e=this._barBuilderLoader)||void 0===e||e.destroy()}status(){return this._status.readonly()}noData(){return this._noData.readonly()}symbolInfo(){return this._symbolInfo}symbol(){return this._symbol.symbol}subSession(){return this._sessionId.value()}setSymbol(e,t){(0,o.default)(e)&&(e={...this._symbol,symbol:e}),void 0!==t&&this._updateSeriesOptions(t),(0,y.compareSymbols)(this._symbol,e)||(this._symbol=e,this._updateSessionId(),this._symbolChanged.fire())}extendedSymbol(){return{...this._symbol,session:this._sessionId.value()}}updateSeriesOptions(e){const t=this._originalSeriesOptions.chartType!==e.chartType;this._updateSeriesOptions(e),t?this._onChartStyleChanged():this._series.applyOptions(e)}updateHorzMargins(e){this._horzMargins=(0,r.default)(this._horzMargins,e),this.fitContent()}
symbolResolved(){return this._symbolResolved}symbolChanged(){return this._symbolChanged}seriesChanged(){return this._seriesChanged}timeFrameInvalidated(){return this._timeFrameInvalidated}restoreOriginalScaleMode(){null!==this._originalScaleMode&&this._series.priceScale().applyOptions({mode:this._originalScaleMode})}switchToPercentageScaleMode(){null===this._originalScaleMode&&(this._originalScaleMode=this._series.priceScale().options().mode),this._series.priceScale().applyOptions({mode:i.PriceScaleMode.Percentage})}chartSession(){return this._miniChart.chartSession()}currentSeriesOptions(){return this._currentSeriesOptions}volumeOptions(){return this._originalVolumeOptions}series(){return this._series}volume(){return this._originalVolumeOptions.visible?this._volume:null}updateData(e,t,s){var i;e&&this.clearSourceData();const r=this._originalSeriesOptions,o=this._buildViewData(s),a=o.series.length;if(this._historyUpdateReceived=this._historyUpdateReceived||void 0===s,0===a)return void(void 0===s&&(this._dataLengthInfo=null,this._firstValueCache=null));void 0!==s||"area"!==r.chartType&&"line"!==r.chartType||(this._firstValueCache=o.series[0].value);const n=this._historyUpdateReceived&&null===this._dataLengthInfo;if(void 0!==s&&!n){const e=this._dataLengthInfo;if(null===e)return;const t={...e};e.lastBarSession=o.lastBarSession;let s=!1;for(const t of o.series)this._series.update(t),e.lastBarTime<t.time&&(e.lastBarTime=t.time,e.realtime+=1,e.lastBarIndex+=1,s=!0);if(o.volume)for(const e of o.volume)this._volume.update(e);if(void 0!==this._whitespacesData&&s){const t=this._whitespacesData.findIndex((t=>t.time>e.lastBarTime));-1===t?(e.whitespaces=0,this._updateWhitespaces([])):0!==t&&(e.whitespaces-=t,this._updateWhitespaces(this._whitespacesData.slice(t)))}return s&&(void 0!==e.fixLeftEdgeUntil?(this._isMainPlot()&&e.fixLeftEdgeUntil>=e.lastBarTime&&this.fitContent(),e.lastBarTime>e.fixLeftEdgeUntil&&(e.history+=e.realtime-1,e.realtime=0,e.fixLeftEdgeUntil=void 0,e.timeFrameInvalidated=!0,this._timeFrameInvalidated.fire())):e.timeFrameInvalidated||(e.timeFrameInvalidated=!0,this._timeFrameInvalidated.fire())),this._updateSeriesColor(o.series[o.series.length-1]),void this._dataUpdated(o,e,t)}const l=o.whitespaces,h=null!==(i=null==l?void 0:l.length)&&void 0!==i?i:0;this._dataLengthInfo={history:a,realtime:0,lastBarIndex:a-1,lastBarTime:o.series[o.series.length-1].time,whitespaces:h,fixLeftEdgeUntil:o.fixLeftEdgeUntil,timeFrameInvalidated:!1,lastBarSession:o.lastBarSession},this._updateSeriesColor(o.series[o.series.length-1]),this._series.applyOptions(this._currentSeriesOptions),this._applyPriceScaleFormatter(),t||this._beforeDataReady(),this._series.setData(o.series),o.volume&&this._volume.setData(o.volume),this._updateWhitespaces(o.whitespaces),this._dataUpdated(o,this._dataLengthInfo),this._isMainPlot()&&this._miniChart.resizeByContainer()}fitContent(){if(null===this._dataLengthInfo||0===this._dataLengthInfo.history)return
;const{history:e,realtime:t,whitespaces:s,lastBarTime:i,fixLeftEdgeUntil:r=0}=this._dataLengthInfo,o=this._miniChart.widget(),a=o.options().width;if(0===a)return;const n=a-o.priceScale("left").width()-o.priceScale("right").width(),{leftLogical:l,rightLogical:h,leftPx:d,rightPx:_}=this._horzMargins;let c=l-(r>=i?0:t),u=e-h+s+t;if(0!==d){c-=d/((n-d)/(u-c+1))}if(0!==_){u+=_/((n-_)/(u-c+1))}u=Math.max(c,u),o.timeScale().setVisibleLogicalRange({from:c,to:u}),o.timeScale().applyOptions({lockVisibleTimeRangeOnResize:!0})}deleteView(){var e;this._series.setData([]),null===(e=this._whitespaces)||void 0===e||e.setData([]),this._volume.setData([])}clearData(){this._symbolInfo=null,this._historyUpdateReceived=!1,this._dataLengthInfo=null,this._firstValueCache=null,this._customPriceFormatter=null,this._status.setValue(0),this._noData.setValue(null),this._directionBasedColor.setValue(null)}resolution(){return this._miniChart.resolution()}forcePercentageMode(){return!1}lastBarTime(){var e;return null===(e=this._dataLengthInfo)||void 0===e?void 0:e.lastBarTime}getViewData(e){return this._buildViewData(e)}isDestroyed(){return this._isDestroyed.readonly()}_isMainPlot(){return!1}_onChartStyleChanged(){this._recreateSeries(),3===this._status.value()&&this.updateData(!1,!0)}_beforeDataReady(){this._currentlyShownDataDescription.setValue({timeframe:this._timeFrame.value(),symbol:this.symbol()})}_dataUpdated(e,t,s){}_onSymbolResolved(e){var t;null===(t=this._barBuilderLoader)||void 0===t||t.destroy(),this._barBuilderLoader=null,this._symbolInfo=e,this._symbolResolved.fire(this._symbolInfo)}_getViewData(e,t){var s;const i=[],r={series:[],volume:i};let o=-1/0;const n=this._bars();if(n.isEmpty())return r;const l=this.minBarIndex();if(null===l)return r;const h=null!=t?t:D(l)?l:n.firstIndex(),d=n.lastIndex();if(null===h||null===d)return r;let _;const{premarketLineColor:c,postmarketLineColor:u,premarketTopColor:m,premarketBottomColor:g,postmarketTopColor:y,postmarketBottomColor:f}=this._getPrePostMarketColors();if(n.range(h,d).each(((t,s)=>{if(t<=p.UNPLOTTABLE_TIME_POINT_INDEX)return!1;const a=this._miniChart.indexToTime(t);if(null===a)return b.logWarn(`Couldn't find time for index ${t}`),!1;const n=w(1e3*a);if(n<=o)return!1;o=n,_=n;const l=this._barIndexSession(t);r.lastBarSession=l,r.series.push(e(n,s,...(e=>{switch(e){case 0:return[c,m,g];case 1:return[u,y,f];default:return[]}})(l)));const h=s[4]>=s[1]?this._originalVolumeOptions.upColor:this._originalVolumeOptions.downColor;return i.push({time:n,value:s[5],color:h}),!1})),this._isMainPlot()&&void 0===t&&void 0!==_)switch(this._timeFrame.value().value){case"1D":r.fixLeftEdgeUntil=_+86400-1;break;case"LASTSESSION":{let e=[],t=0;const i=this.maxBarIndex(),o=null===(s=this._barBuilderLoader)||void 0===s?void 0:s.get();if(o){const s=this._generateBarsToSessionEnd(o);(null==s?void 0:s.length)&&(null!==i&&i>d&&(e=s),t=s[s.length-1].time)}else if(this._initBarBuilder((0,a.ensureNotNull)(this.symbolInfo())),null!==i&&i>d){let s=_;for(let t=d+1;t<=i;t++)s+=60,e.push({time:s});t=s}else t=_+1440
;r.whitespaces=e,r.fixLeftEdgeUntil=t}}return r}_buildViewData(e){switch(this._originalSeriesOptions.chartType){case"histogram":{const e=this._currentSeriesOptions;return this._getViewData(((t,s)=>function(e,t,s,i){const r=t[4];return{time:e,color:r>0?s:i,value:r}}(t,s,e.upColor,e.downColor)))}case"line":return this._getViewData(S,e);case"area":return this._getViewData(I,e);case"bars":case"candlesticks":return this._getViewData(v,e)}}_barIndexSession(e){}_onSymbolError(e){b.logWarn((0,y.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol)+" symbol resolving error: "+e),this.updateData(!0),this._status.setValue(1)}_onSymbolNotPermitted(){this._noData.setValue(1)}_onSymbolGroupNotPermitted(){this._noData.setValue(1)}_onSymbolInvalid(){this._noData.setValue(0)}_onResolutionOrExchangeNotPermittedError(){b.logError((0,y.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol)+" resolution or exchange permission error"),this.updateData(!0),this._isMainPlot()&&this._miniChart.showMessage(l.t(null,void 0,s(467093))),setTimeout((()=>this._miniChart.updateAvailableTimeframes()),1e3)}_onDataError(){1!==this._status.value()&&this._status.setValue(2),this._noData.setValue(3)}_onDataCompleted(){this._status.setValue(3),this._noData.setValue(0===this._bars().size()?2:null),2===this._noData.value()&&this._isMainPlot()&&this._miniChart.showMessage(l.t(null,void 0,s(180526)))}_onData(e){null!==this.minBarIndex()&&null!==this.maxBarIndex()&&this.updateData(!1,void 0,e)}_updateSeriesOptions(e){this._originalSeriesOptions=(0,r.default)(this._originalSeriesOptions,e),this._currentSeriesOptions=(0,r.default)(this._currentSeriesOptions,this._originalSeriesOptions),this._updateSeriesColor(),e.horzMargins&&this.updateHorzMargins(e.horzMargins)}_recreateSeries(){const e=this._miniChart.widget();e.removeSeries(this._series),e.removeSeries(this._volume),this._whitespaces&&(e.removeSeries(this._whitespaces),this._whitespaces=null),this._series=this._createSeries(),this._volume=this._createVolume(),this._seriesChanged.fire()}_initBarBuilder(e){return null===this._barBuilderLoader&&(this._barBuilderLoader=new h.AsyncResourceWrapper(Promise.all([s.e(83433),s.e(48834),s.e(96003)]).then(s.bind(s,397796)).then((t=>{const s=new t.LightweightMiniChartBarBuilder(e);if(this._isLastSessionInterval.value()&&3===this.status().value()&&this._dataLengthInfo){const e=this._bars().lastIndex(),t=this.maxBarIndex(),i=this._generateBarsToSessionEnd(s);(null==i?void 0:i.length)&&(this._dataLengthInfo.fixLeftEdgeUntil=i[i.length-1].time,null!==t&&null!==e&&t>e&&this._updateWhitespaces(i),this.fitContent())}return s})))),this._barBuilderLoader.promise()}_firstAndLastValuesForSeriesColor(e,t){if(null===this._firstValueCache||!this._dataLengthInfo)return null;if("line"!==e&&"area"!==e)return null;const s=this._series.dataByIndex(this._dataLengthInfo.lastBarIndex);return null!==s||t?(t=null!=t?t:s,[this._firstValueCache,t.value]):null}_updateSeriesColor(e){const t=this._originalSeriesOptions,s=t.chartType,i=this._firstAndLastValuesForSeriesColor(s,e)
;if(null===i)return;const[r,o]=i;if("line"===s||"area"===s){const e="line"===s?o>=r:o>r;if("area"===s){const s=this._currentSeriesOptions;e?(s.lineColor=t.growingLineColor||t.lineColor,s.topColor=t.growingTopColor||t.topColor,s.bottomColor=t.growingBottomColor||t.bottomColor):(s.lineColor=t.fallingLineColor||t.lineColor,s.topColor=t.fallingTopColor||t.topColor,s.bottomColor=t.fallingBottomColor||t.bottomColor),s.lineColor||(s.lineColor=this._series.options().lineColor),this._series.applyOptions({topColor:s.topColor,bottomColor:s.bottomColor,lineColor:s.lineColor}),this._directionBasedColor.setValue(s.lineColor)}else if("line"===s){const{color:s,growingColor:i=s,fallingColor:r=s}=t,o=this._currentSeriesOptions;o.color=e?i:r,o.color||(o.color=this._series.options().color),this._series.applyOptions({color:o.color}),this._directionBasedColor.setValue(o.color)}}}_createSeries(){const e=this._miniChart.widget();let t;switch(this._currentSeriesOptions.chartType){case"line":t=e.addLineSeries(this._currentSeriesOptions);break;case"histogram":t=e.addHistogramSeries(this._currentSeriesOptions);break;case"area":t=e.addAreaSeries(this._currentSeriesOptions);break;case"bars":t=e.addBarSeries(this._currentSeriesOptions);break;case"candlesticks":t=e.addCandlestickSeries(this._currentSeriesOptions)}return null===this._originalScaleMode&&(this._originalScaleMode=t.priceScale().options().mode),t.priceScale().applyOptions({scaleMargins:this._currentSeriesOptions.scaleMargins}),t}_createVolume(){const e=this._miniChart.widget().addHistogramSeries(this._originalVolumeOptions);return e.priceScale().applyOptions({scaleMargins:this._originalVolumeOptions.scaleMargins}),e}_applyPriceScaleFormatter(){if("priceFormat"in this._originalSeriesOptions)return;const e=(0,a.ensureNotNull)(this._symbolInfo);this._currentSeriesOptions.priceFormat={type:"custom",minMove:e.minmov/e.pricescale,formatter:t=>(0,f.createSeriesFormatter)(e,"default").format(t)},this._series.applyOptions(this._currentSeriesOptions)}_updateSessionId(){this._sessionId.setValue(this._isLastSessionInterval.value()?"extended":this._symbol.session)}_updateWhitespaces(e){void 0===e||0===e.length?null!==this._whitespaces&&(this._miniChart.widget().removeSeries(this._whitespaces),this._whitespaces=null):(null===this._whitespaces&&(this._whitespaces=this._miniChart.widget().addLineSeries()),this._whitespacesData=null===this._whitespaces?void 0:e,this._whitespaces.setData(e))}_generateBarsToSessionEnd(e){const t=this.symbolInfo(),s=this._bars().lastIndex();if(t&&s&&this._isLastSessionInterval.value()){const i=this._miniChart.indexToTime(s);if(null===i)return;return e.update(t),e.generateBarsToSessionEnd(this.resolution(),i).map((e=>({time:w(e)})))}}_getPrePostMarketColors(){if(!this._isMainPlot())return{};let e,t,s,i;const r=this._originalSeriesOptions.premarketLineColor,o=this._originalSeriesOptions.postmarketLineColor;if("area"===this._originalSeriesOptions.chartType&&r&&o){const a=this._currentSeriesOptions,l=a.growingTopColor||a.fallingTopColor||a.topColor;if(void 0!==l){const t=(0,
n.tryParseRgba)(l);if(null!==t){const i=t[3];e=(0,d.applyAlpha)(r,i),s=(0,d.applyAlpha)(o,i)}}const h=a.growingBottomColor||a.fallingBottomColor||a.bottomColor;if(void 0!==h){const e=(0,n.tryParseRgba)(h);if(null!==e){const s=e[3];t=(0,d.applyAlpha)(r,s),i=(0,d.applyAlpha)(o,s)}}}return{premarketLineColor:r,postmarketLineColor:o,premarketTopColor:e,postmarketTopColor:s,premarketBottomColor:t,postmarketBottomColor:i}}}},538660:(e,t,s)=>{s.d(t,{ChartSession:()=>h});var i=s(707957),r=s(650151),o=s(401580),a=s(541558);const n=(0,s(201089).getLogger)("ChartApi.AbstractSession");var l=s(389137);class h extends class{constructor(e,t,s){this._isConnected=new o.WatchedValue(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId="",this._sessionIdChanged=new i.Delegate,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=s}destroy(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")}isConnected(){return this._isConnected}sessionId(){return this._sessionId}onSessionIdChanged(){return this._sessionIdChanged}connect(){0===this._state&&((0,r.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(`${this._sessionPrefix}_${(0,a.randomHash)()}`),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))}disconnect(){0!==this._state&&((0,r.assert)(""!==this._sessionId,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile((()=>{this._chartApi.connected()&&this._sendRemoveSession(),this._processDestroyingOnServer()})))}onMessage(e){switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":const t=String(e.params[0]),s=String(e.params[1]);return void this._onCriticalError(t,s)}this._onMessage(e)}serverTime(){return this._chartApi.serverTime()}_getChartApi(){return this._chartApi}_generateLogMessage(e){return`[${this._sessionId}] ${e}`}_onCriticalError(e,t){this._logError(`Critical error. Reason=${e}, info=${t}.`),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")}_onChartApiConnected(){(0,r.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)}_onChartApiDisconnected(){this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this.connect()}_setSessionId(e){const t=this._sessionId;this._logNormal(`Changing sessionId: old=${t}, new=${e}`),this._sessionId=e,this._sessionIdChanged.fire(e,t)
}_logNormal(e){n.logNormal(this._generateLogMessage(e))}_logError(e){n.logError(this._generateLogMessage(e))}_processDestroyingOnServer(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId("")}_forbidConnectWhile(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1}}{constructor(e,t=!1){super(e,"cs",!1),this._sessionDisabled=!1,this._handler=null,this._criticalError=new i.Delegate,this._symbolResolveMap=new Map,this._lastSymbolResolveInfoMap=new Map,this._disableStatistics=t}destroy(){this._criticalError.destroy(),this._handler=null,this._symbolResolveMap.clear(),super.destroy()}switchTimezone(e){return this._getChartApi().switchTimezone(this.sessionId(),e)}defaultResolutions(){return this._getChartApi().defaultResolutions()}availableCurrencies(){return this._getChartApi().availableCurrencies()}availableUnits(){return this._getChartApi().availableUnits()}availablePriceSources(e){return this._getChartApi().availablePriceSources(e)}resolveSymbol(e,t,s){if(this._symbolResolveMap.has(t)){const[e,i]=this._symbolResolveMap.get(t);return Array.isArray(i)?i.push(s):i.then(s),e}{const i=[s];return this._getChartApi().resolveSymbol(this.sessionId(),e,t,(s=>{if("symbol_error"===s.method)this._symbolResolveMap.delete(t);else{this._symbolResolveMap.set(t,[e,Promise.resolve(s)]);const[,i]=s.params,r={pro_name:i.pro_name,ticker:i.ticker};this._lastSymbolResolveInfoMap.set(t,r),r.pro_name&&this._lastSymbolResolveInfoMap.set(r.pro_name,r),i.full_name&&this._lastSymbolResolveInfoMap.set(i.full_name,r),r.ticker&&this._lastSymbolResolveInfoMap.set(r.ticker,r)}i.forEach((e=>e(s)))})),this._symbolResolveMap.set(t,[e,i]),e}}requestFirstBarTime(e,t,s){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,s)}lastSymbolResolveInfo(e){var t;return null!==(t=this._lastSymbolResolveInfoMap.get(e))&&void 0!==t?t:null}createSeries(e,t,s,i,r,o,a){return this._getChartApi().createSeries(this.sessionId(),e,t,s,i,r,o,a)}modifySeries(e,t,s,i,r,o,a){return this._getChartApi().modifySeries(this.sessionId(),e,t,s,i,r,o,a)}removeSeries(e){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e)}requestMoreData(e,t,s){return"number"==typeof e?this._getChartApi().requestMoreData(this.sessionId(),e):this._getChartApi().requestMoreData(this.sessionId(),e,t,s)}requestMoreTickmarks(e,t,s){return(0,l.isNumber)(e)?this._getChartApi().requestMoreTickmarks(this.sessionId(),e):this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,s)}canCreateStudy(e,t){return this._getChartApi().canCreateStudy(this.sessionId(),e,t)}getStudyCounter(){return this._getChartApi().getStudyCounter(this.sessionId())}getFundamentalCounter(){return this._getChartApi().getFundamentalCounter(this.sessionId())}createStudy(e,t,s,i,r,o,a){return this._getChartApi().createStudy(this.sessionId(),e,t,s,i,r,o,a)}modifyStudy(e,t,s,i,r){return this._getChartApi().modifyStudy(this.sessionId(),e,t,s,i,r)}notifyStudy(e,t,s){return this._getChartApi().notifyStudy(this.sessionId(),e,t,s)
}removeStudy(e){return this._getChartApi().removeStudy(this.sessionId(),e)}createPointset(e,t,s,i,r,o){return this._getChartApi().createPointset(this.sessionId(),e,t,s,i,r,o)}modifyPointset(e,t,s,i){return this._getChartApi().modifyPointset(this.sessionId(),e,t,s,i)}removePointset(e){return this._getChartApi().removePointset(this.sessionId(),e)}setVisibleTimeRange(e,t,s,i,r,o){0}criticalError(){return this._criticalError}connect(e=null){null!==e&&(this._handler=e),this._symbolResolveMap.clear(),super.connect()}setHandler(e){this._handler=e}connected(){return this.isConnected().value()&&!this._sessionDisabled}disable(){this._sessionDisabled=!0}chartApi(){return this._getChartApi()}_sendCreateSession(){Object.keys(this).forEach((e=>{/^(s|st|symbol_)\d+$/.test(e)&&delete this[e]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)}_sendRemoveSession(){this._getChartApi().chartDeleteSession(this.sessionId())}_onMessage(e){this._handler&&this._handler(e)}_onCriticalError(e,t){this._criticalError.fire(e,t),super._onCriticalError(e,t)}}},938550:(e,t,s)=>{s.d(t,{WatchedObject:()=>a});var i=s(401580),r=s(389137);function o(e,t){return(0,r.deepEquals)(e,t)[0]}class a extends i.WatchedValue{constructor(e,t=o){super(e),this._comparator=t}setValue(e,t){!1===this._comparator(this.value(),e)&&super.setValue(e,t)}}},826989:(e,t,s)=>{var i;s.d(t,{SymbolErrorPermissionDeniedReason:()=>i,invalidSymbol:()=>o,permissionDenied:()=>r}),function(e){e.Symbol="symbol",e.GroupPermission="group"}(i||(i={}));const r="permission denied",o="invalid symbol"},442410:(e,t,s)=>{s.d(t,{SeriesDataEvents:()=>r});var i=s(707957);class r{constructor(){this._created=new i.Delegate,this._modified=new i.Delegate,this._loading=new i.Delegate,this._completed=new i.Delegate,this._error=new i.Delegate,this._symbolError=new i.Delegate,this._symbolResolved=new i.Delegate,this._seriesError=new i.Delegate,this._symbolNotPermitted=new i.Delegate,this._symbolInvalid=new i.Delegate,this._symbolGroupNotPermitted=new i.Delegate,this._chartTypeNotPermitted=new i.Delegate,this._intradaySpreadNotPermitted=new i.Delegate,this._intradayExchangeNotPermitted=new i.Delegate,this._customIntervalNotPermitted=new i.Delegate,this._secondsIntervalNotPermitted=new i.Delegate,this._ticksIntervalNotPermitted=new i.Delegate,this._tickMarksRangeChanged=new i.Delegate,this._barReceived=new i.Delegate,this._seriesTimeFrame=new i.Delegate,this._dataUpdated=new i.Delegate,this._unsupportedResolutionRequested=new i.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),
this._ticksIntervalNotPermitted.destroy(),this._tickMarksRangeChanged.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy(),this._unsupportedResolutionRequested.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}ticksIntervalNotPermitted(){return this._ticksIntervalNotPermitted}tickMarksRangeChanged(){return this._tickMarksRangeChanged}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}unsupportedResolutionRequested(){return this._unsupportedResolutionRequested}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTicksIntervalNotPermitted(){this._ticksIntervalNotPermitted.fire(),this.fireError()}fireTickMarksRangeChanged(e){this._tickMarksRangeChanged.fire(e)}fireBarReceived(e){this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,s,i,r){this._seriesTimeFrame.fire(e,t,s,i,r)}fireDataUpdated(e,t,s,i){this._dataUpdated.fire(e,t,s,i)}fireUnsupportedResolutionRequested(){this._unsupportedResolutionRequested.fire()}}},133822:(e,t,s)=>{s.d(t,{validateGraphicsCommands:()=>o});var i=s(130551),r=s(650151);function o(e){if(!(0,i.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if((0,i.hasProperty)(e,"create"),(0,i.hasProperty)(e,"erase")){const t=e.erase;(0,r.assert)(Array.isArray(t),"Collection of erase commands should be array")
;for(const e of t){if(!(0,i.isObject)(e)||!(0,i.hasProperty)(e,"action"))throw new Error("Command should be an object with 'action' property");(0,r.assert)("all"===e.action||"one"===e.action,"Erase command action should be 'all' or 'one'")}}return e}},25e4:(e,t,s)=>{function i(e,t,s){return e===t||e===s}s.d(t,{symbolSameAsResolved:()=>i})},623551:(e,t,s)=>{s.d(t,{AsyncResourceWrapper:()=>i});class i{constructor(e){this._destroyed=!1,this._callbacks=[],this._resource={pendingResource:e},e.then((e=>{for(const t of this._callbacks)t(e);this._resource.resource=e})).finally((()=>{this._callbacks=[]}))}destroy(){this._callbacks=[],this._destroyed=!0}callFunction(e){this._destroyed||(this._resource.resource?e(this._resource.resource):this._callbacks.push(e))}get(){return this._destroyed||!this._resource.resource?null:this._resource.resource}promise(){return this._destroyed?Promise.reject("Resource is destroyed"):this._resource.pendingResource}}}}]);